<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estoque - API</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

<style>
    .baixo { background-color: red !important; color: white !important; font-weight: bold; }
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-primary mb-4 p-3">
    <span class="navbar-brand mb-0 h1">Estoque (API)</span>
</nav>

<div class="container">
    <h2 class="mb-4">Consulta via API</h2>

    <table class="table table-striped table-bordered text-center" id="tabela">
        <thead class="table-dark">
            <tr>
                <th>Nome</th>
                <th>Quantidade</th>
                <th>Validade</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
fetch("api/estoque.php")
    .then(r => r.json())
    .then(produtos => {
        const tbody = document.querySelector("#tabela tbody");

        produtos.forEach(p => {
            const linha = document.createElement("tr");

            linha.innerHTML = `
                <td>${p.nome}</td>
                <td class="${p.quantidade < p.estoque_minimo ? 'baixo' : ''}">
                    ${p.quantidade}
                </td>
                <td>${p.data_validade}</td>
            `;

            tbody.appendChild(linha);
        });
    });
</script>

</body>
</html>
